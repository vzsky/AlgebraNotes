\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{fancyhdr}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage[normalem]{ulem}
\usepackage[most,many,breakable]{tcolorbox}
\usepackage[a4paper, top=80pt, foot=25pt, bottom=50pt, left=0.5in, right=0.5in]{geometry}
\usepackage{hyperref, theoremref}
\hypersetup{
	pdftitle={Assignment},
	colorlinks=true, linkcolor=b!90,
	bookmarksnumbered=true,
	bookmarksopen=true
}
\usepackage{nameref}
\usepackage{parskip}
\pagestyle{fancy}

\usepackage[explicit,compact]{titlesec}
\titleformat{\chapter}[block]{\bfseries\huge}{\thechapter. }{\compact}{#1}
        

%%%%%%%%%%%%%%%%%%%%%
%% Defining colors %%
%%%%%%%%%%%%%%%%%%%%%

\definecolor{lr}{RGB}{188, 75, 81}
\definecolor{r}{RGB}{249, 65, 68}
\definecolor{dr}{RGB}{174, 32, 18}
\definecolor{lo}{RGB}{255, 172, 129}
\definecolor{do}{RGB}{202, 103, 2}
\definecolor{o}{RGB}{238, 155, 0}
\definecolor{ly}{RGB}{255, 241, 133}
\definecolor{y}{RGB}{255, 229, 31}
\definecolor{dy}{RGB}{143, 126, 0}
\definecolor{lb}{RGB}{148, 210, 189}
\definecolor{bg}{RGB}{10, 147, 150}
\definecolor{b}{RGB}{39, 125, 161}
\definecolor{db}{RGB}{0, 95, 115}
\definecolor{p}{RGB}{229, 152, 155}
\definecolor{dp}{RGB}{181, 101, 118}
\definecolor{pp}{RGB}{142, 143, 184}
\definecolor{v}{RGB}{109, 89, 122}
\definecolor{lg}{RGB}{144, 190, 109}
\definecolor{g}{RGB}{64, 145, 108}
\definecolor{dg}{RGB}{45, 106, 79}

\colorlet{mysol}{g}
\colorlet{mythm}{lr}
\colorlet{myqst}{db}
\colorlet{myclm}{lb}
\colorlet{mywrong}{r}
\colorlet{mylem}{o}
\colorlet{mydef}{lg}
\colorlet{mycor}{lb}
\colorlet{myrem}{dr}

%%%%%%%%%%%%%%%%%%%%%

\newcommand{\col}[2]{
  \color{#1}#2\color{black}\,
}

\newcommand{\TODO}[1][5cm]{
  \color{red}TODO\color{black}
  \vspace{#1}
}

\newcommand{\wans}[1]{
	\noindent\color{mywrong}\textbf{Wrong answer: }\color{black}
	#1 


}

\newcommand{\wreason}[1]{
	\noindent\color{mywrong}\textbf{Reason: }\color{black}
	#1 

  
}

\newcommand{\sol}[1]{
	\noindent\color{mysol}\textbf{Solution: }\color{black}
	#1


}

\newcommand{\nt}[1]{
  \begin{note}Note: #1\end{note}
}

\newcommand{\ky}[1]{
  \begin{key}#1\end{key}
}

\newcommand{\pf}[1]{
  \begin{myproof}#1\end{myproof}
}

\newcommand{\qs}[3][]{
  \begin{question}{#2}{#1}#3\end{question}
}

\newcommand{\df}[3][]{
  \begin{definition}{#2}{#1}#3\end{definition}
}

\newcommand{\thm}[3][]{
  \begin{theorem}{#2}{#1}#3\end{theorem}
}

\newcommand{\clm}[3][]{
  \begin{claim}{#2}{#1}#3\end{claim} 
}

\newcommand{\lem}[3][]{
  \begin{lemma}{#2}{#1}#3\end{lemma}
}

\newcommand{\cor}[3][]{
  \begin{corollary}{#2}{#1}#3\end{corollary}
}

\newcommand{\rem}[3][]{
  \begin{remark}{#2}{#1}#3\end{remark}
}

\newcommand{\twoways}[2]{
  \leavevmode\\
  ($\Longrightarrow$): 
  \begin{shift}#1\end{shift}
  ($\Longleftarrow$):
  \begin{shift}#2\end{shift} 
}

\newcommand{\nways}[2]{
  \leavevmode\\
  ($#1$): 
  \begin{shift}#2\end{shift}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ENVRN

\newenvironment{myproof}[1][\proofname]{%
	\proof[\bfseries #1: ]
}{\endproof}

\tcbuselibrary{theorems,skins,hooks}
\newtcolorbox{shift}
{%
  before upper={\setlength{\parskip}{5pt}},
  blanker,
	breakable,
	width=0.95\textwidth,
  enlarge left by=0.03\textwidth,
}

\tcbuselibrary{theorems,skins,hooks}
\newtcolorbox{key}
{%
	breakable,
	width=0.95\textwidth,
  enlarge left by=0.03\textwidth,
}

\tcbuselibrary{theorems,skins,hooks}
\newtcolorbox{note}
{%
	enhanced,
	breakable,
	colback = white,
	width=\textwidth,
	frame hidden,
	borderline west = {2pt}{0pt}{black},
	sharp corners,
}

\tcbuselibrary{theorems,skins,hooks}
\newtcbtheorem[]{remark}{Remark}
{%
	enhanced,
	breakable,
	colback = white,
	frame hidden,
	boxrule = 0sp,
	borderline west = {2pt}{0pt}{myrem},
	sharp corners,
	detach title,
  before upper={\setlength{\parskip}{5pt}\tcbtitle\par\smallskip},
	coltitle = myrem,
	fonttitle = \bfseries\sffamily,
	description font = \mdseries,
	separator sign none,
	segmentation style={solid, myrem},
}{rem}

\tcbuselibrary{theorems,skins,hooks}
\newtcbtheorem[number within=section]{lemma}{Lemma}
{%
	enhanced,
	breakable,
	colback = white,
	frame hidden,
	boxrule = 0sp,
	borderline west = {2pt}{0pt}{mylem},
	sharp corners,
	detach title,
  before upper={\setlength{\parskip}{5pt}\tcbtitle\par\smallskip},
	coltitle = mylem,
	fonttitle = \bfseries\sffamily,
	description font = \mdseries,
	separator sign none,
	segmentation style={solid, mylem},
}{lem}

\tcbuselibrary{theorems,skins,hooks}
\newtcbtheorem{claim}{Claim}
{%
  parbox=false,
	enhanced,
	breakable,
	colback = white,
	frame hidden,
	boxrule = 0sp,
	borderline west = {2pt}{0pt}{myclm},
	sharp corners,
	detach title,
  before upper={\setlength{\parskip}{5pt}\tcbtitle\par\smallskip},
	coltitle = myclm,
	fonttitle = \bfseries\sffamily,
	description font = \mdseries,
	separator sign none,
	segmentation style={solid, myclm},
}{clm}

\makeatletter
\newtcbtheorem[number within=section, use counter from=lemma]{theorem}{Theorem}{enhanced,
	breakable,
	colback=white,
	colframe=mythm,
	attach boxed title to top left={yshift*=-\tcboxedtitleheight},
	fonttitle=\bfseries,
	title={#2},
	boxed title size=title,
	boxed title style={%
			sharp corners,
			rounded corners=northwest,
			colback=mythm,
			boxrule=0pt,
		},
	underlay boxed title={%
			\path[fill=mythm] (title.south west)--(title.south east)
			to[out=0, in=180] ([xshift=5mm]title.east)--
			(title.center-|frame.east)
			[rounded corners=\kvtcb@arc] |-
			(frame.north) -| cycle;
		},
	#1
}{thm}
\makeatother

\makeatletter
\newtcbtheorem{question}{Question}{enhanced,
	breakable,
	colback=white,
	colframe=myqst,
	attach boxed title to top left={yshift*=-\tcboxedtitleheight},
	fonttitle=\bfseries,
	title={#2},
	boxed title size=title,
	boxed title style={%
			sharp corners,
			rounded corners=northwest,
			colback=myqst,
			boxrule=0pt,
		},
	underlay boxed title={%
			\path[fill=myqst] (title.south west)--(title.south east)
			to[out=0, in=180] ([xshift=5mm]title.east)--
			(title.center-|frame.east)
			[rounded corners=\kvtcb@arc] |-
			(frame.north) -| cycle;
		},
	#1
}{qs}
\makeatother

\makeatletter
\newtcbtheorem[number within=section]{definition}{Definition}{enhanced,
	breakable,
	colback=white,
	colframe=mydef,
	attach boxed title to top left={yshift*=-\tcboxedtitleheight},
	fonttitle=\bfseries,
	title={#2},
	boxed title size=title,
	boxed title style={%
			sharp corners,
			rounded corners=northwest,
			colback=mydef,
			boxrule=0pt,
		},
	underlay boxed title={%
			\path[fill=mydef] (title.south west)--(title.south east)
			to[out=0, in=180] ([xshift=5mm]title.east)--
			(title.center-|frame.east)
			[rounded corners=\kvtcb@arc] |-
			(frame.north) -| cycle;
		},
	#1
}{def}
\makeatother

\makeatletter
\newtcbtheorem[number within=section, use counter from=lemma]{corollary}{Corollary}{enhanced,
	breakable,
	colback=white,
	colframe=mycor,
	attach boxed title to top left={yshift*=-\tcboxedtitleheight},
	fonttitle=\bfseries,
	title={#2},
	boxed title size=title,
	boxed title style={%
			sharp corners,
			rounded corners=northwest,
			colback=mycor,
			boxrule=0pt,
		},
	underlay boxed title={%
			\path[fill=mycor] (title.south west)--(title.south east)
			to[out=0, in=180] ([xshift=5mm]title.east)--
			(title.center-|frame.east)
			[rounded corners=\kvtcb@arc] |-
			(frame.north) -| cycle;
		},
	#1
}{cor}
\makeatother
